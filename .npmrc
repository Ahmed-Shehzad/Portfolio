# ===========================
# ⚙️  npm Configuration (CI)
# ===========================

# Use official npm registry
registry=https://registry.npmjs.org/

# Save exact versions on install (no semver drift)
save-exact=true

# Always verify package-lock integrity
package-lock=true

# Enforce HTTPS
strict-ssl=true

# Disable interactive stuff for CI
fund=false
audit=false
progress=false
color=false
loglevel=error

# Avoid caching stale versions — always check online registry
prefer-offline=false
prefer-online=true

# Use default npm cache (can be overridden by CI cache key)
# cache=${NPM_CACHE_DIR:-.npm-cache}

# Allow npm to auto-resolve peer dependencies
legacy-peer-deps=true

# Don’t run lifecycle scripts (security + speed)
ignore-scripts=true

# Enable provenance for published packages (ignored in CI builds)
provenance=true

# Workspaces — harmless if unused
workspaces-update=false

# Timeout to avoid hung installs on slow networks
fetch-timeout=120000
fetch-retries=3
